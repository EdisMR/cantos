class HeaderComponent extends HTMLElement{constructor(){super();const e=document.createElement("template");e.innerHTML='\n\t\t<div class="flex space-between wrap" id="songControlButtons">\n\t\t<div>\n\t\t\t<button><a href="../index.html">&#127968; Inicio</a></button>\n\t\t</div>\n\t\t<div>\n\t\t\t<button onclick="maximizeSongText()">&#x2927; Maximizar</button>\n\t\t</div>\n\t\t<div class="flex nowrap" id="transpositionButtons">\n\t\t\t<button onclick="transposedSong(10)">-1</button>\n\t\t\t<button onclick="transposedSong(11)">-&#189;</button>\n\t\t\t<button onclick="resetSong()">0</button>\n\t\t\t<button onclick="transposedSong(1)">+&#189;</button>\n\t\t\t<button onclick="transposedSong(2)">+1</button>\n\t\t</div>\n\t</div>\n\t\t',this.appendChild(e.content.cloneNode(!0))}}customElements.define("header-component",HeaderComponent);class BodyContentComponent extends HTMLElement{constructor(){super();const e=document.createElement("template");e.innerHTML=`\n\t\t<section>\n\t\t<h1>${songTitle}</h1>\n\n\t\t<pre id="songText-original" class="hidden">\n\t\t${songOriginalText}\n\t\t</pre>\n\t</section>\n\t\t`,this.appendChild(e.content.cloneNode(!0))}}customElements.define("body-component",BodyContentComponent);class FooterComponent extends HTMLElement{constructor(){super();const e=document.createElement("template");e.innerHTML=`\n\t\t<section id="songMaximizationArea">\n\t\t<button id="closeFullscreen" class="fg-accent">Ã—</button>\n\t\t<pre id="songText-processed"></pre>\n\t</section>\n\n\t<section class="categories">\n\t\t<p>categorias: ${categoriesTXT}</p>\n\t</section>\n\n\t<footer class="flex space-between">\n\t\t<span>&copy;<span id="currentYear"></span></span>\n\t\t<span>@EdisMR</span>\n\t</footer>\n\t\t`,this.appendChild(e.content.cloneNode(!0))}}customElements.define("footer-component",FooterComponent),document.title=songTitle;const originalText=document.getElementById("songText-original").innerHTML,processedText=document.getElementById("songText-processed"),songMaximizationArea=document.getElementById("songMaximizationArea"),closeFullscreenBtn=document.getElementById("closeFullscreen"),currentYear=document.getElementById("currentYear");let formattedText="";function formatText(){formattedText=originalText.replace(/\[([^\]]+)\]/g,'<span class="chord">[$1]</span>')}formatText(),processedText.innerHTML=formattedText;const NOTES_SHARP=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],FLAT_EQUIV={"C#":"Db","D#":"Eb","F#":"Gb","G#":"Ab","A#":"Bb"};function transposeChord(e,t,n=!1){const o=e.match(/^([A-G]{1}[#b]?)(.*)$/);if(!o)return e;const[s,r,c]=o,i=r.replace("Db","C#").replace("Eb","D#").replace("Gb","F#").replace("Ab","G#").replace("Bb","A#"),a=NOTES_SHARP.indexOf(i);if(-1===a)return e;let l=NOTES_SHARP[(a+t+12)%12];return n&&FLAT_EQUIV[l]&&(l=FLAT_EQUIV[l]),l+c}function transposeSongText(e,t,n=!1){return e.replace(/\[([^\]]+)\]/g,((e,o)=>`[${transposeChord(o,t,n)}]`))}let workingPromise=!1;async function transposedSong(e){let t=transposeSongText(formattedText,e,!1);formattedText=t,processedText.innerHTML=t,workingPromise||(workingPromise=!0,processedText.style.zoom="100%",new Promise((e=>{setTimeout((()=>{e()}),1e3)})).then((()=>{removeEmptySpace(),workingPromise=!1})))}async function resetSong(){formatText(),processedText.innerHTML=formattedText,await transposedSong(0).then((()=>{}))}function maximizeSongText(){songMaximizationArea.requestFullscreen()}function removeEmptySpace(){let e=document.body.getBoundingClientRect().width;if(e>1500)return;let t=100-100*(Number.parseFloat(processedText.getBoundingClientRect().width)+Number.parseFloat(getComputedStyle(processedText).marginLeft.replace("px",""))+Number.parseFloat(getComputedStyle(processedText).marginRight.replace("px",""))+Number.parseFloat(getComputedStyle(processedText).paddingLeft.replace("px",""))+Number.parseFloat(getComputedStyle(processedText).paddingRight.replace("px","")))/e,n=t>0;n||(t*=-1),t=Number.parseFloat(t.toFixed(2));let o="0";o=n?(100+t).toString()+"%":(100-t).toString()+"%",processedText.style.zoom=o}function closeFullscreen(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}closeFullscreenBtn.addEventListener("click",(()=>{closeFullscreen()})),currentYear.innerHTML=(new Date).getFullYear();